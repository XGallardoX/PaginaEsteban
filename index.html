<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Multi-Modelo â€“ ImÃ¡genes | Sonidos | Posturas</title>
  <meta name="description" content="DemostraciÃ³n interactiva de 3 modelos de IA: clasificaciÃ³n de desechos, ritmos musicales y posturas de ejercicio." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
  <link rel="stylesheet" href="./assets/css/style.css" />
  <meta name="color-scheme" content="light dark" />

  <!-- TensorFlow.js 3.x: versiÃ³n compatible con Teachable Machine ya noxdxd -->
  <!-- TensorFlow.js 4.x: compatible con modelos convertidos con v4.22.0 -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js"></script>


  <!-- Teachable Machine -->
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/audio@0.8/dist/teachablemachine-audio.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>

  <!-- Tu JS principal -->
  <script type="module" src="./assets/js/main.js"></script>
</head>


<body>
  <a class="skip-link" href="#main">Saltar al contenido</a>

  <header class="app-header">
    <div class="brand">
      <span class="logo">ğŸ¤–</span>
      <div>
        <h1>AI Multi-Modelo</h1>
        <p class="subtitle">ImÃ¡genes â™»ï¸ &nbsp;|&nbsp; Sonidos ğŸšï¸ &nbsp;|&nbsp; Posturas ğŸ‹ï¸</p>
      </div>
    </div>
    <div class="header-actions">
      <button id="darkToggle" class="btn" aria-pressed="false" title="Alternar modo oscuro">ğŸŒ˜</button>
      <a class="btn ghost" href="./README.html" target="_blank" rel="noopener">Ayuda / README</a>
    </div>
  </header>

  <div class="app-layout">
    <nav class="sidebar" aria-label="Selector de modo">
      <ul>
        <li>
          <button class="tab-btn active" data-tab="images" id="tab-images" accesskey="1" aria-controls="panel-images">
            <span class="icon">â™»ï¸</span> ImÃ¡genes
          </button>
        </li>
        <li>
          <button class="tab-btn" data-tab="audio" id="tab-audio" accesskey="2" aria-controls="panel-audio">
            <span class="icon">ğŸšï¸</span> Sonidos
          </button>
        </li>
        <li>
          <button class="tab-btn" data-tab="poses" id="tab-poses" accesskey="3" aria-controls="panel-poses">
            <span class="icon">ğŸ‹ï¸</span> Posturas
          </button>
        </li>
      </ul>

      <div class="about">
        <details>
          <summary>Acerca del modelo</summary>
          <div id="about-content">
            <p>Selecciona un modo para ver descripciÃ³n, clases, limitaciones y cÃ³mo mejorar el dataset.</p>
          </div>
        </details>

        <div class="status">
          <span id="status-badge" class="badge">Cargandoâ€¦</span>
          <small id="latency">Latencia: â€”</small>
        </div>
      </div>
    </nav>

    <main id="main" class="panels" tabindex="-1">
      <!-- ================== IMÃGENES ================== -->
      <section id="panel-images" class="panel active" aria-labelledby="tab-images">
        <div class="panel-head">
          <h2>ClasificaciÃ³n de desechos</h2>
          <div class="controls">
            <button id="imgStart" class="btn">ğŸ¥ Iniciar cÃ¡mara</button>
            <button id="imgFreeze" class="btn ghost">â¸ï¸ Congelar</button>
            <label class="file">
              ğŸ“· Subir imagen
              <input type="file" id="imgUpload" accept="image/*" />
            </label>
            <label class="select">
              Fuente: 
              <select id="imgSource">
                <option value="webcam">Webcam</option>
                <option value="upload">Archivo</option>
              </select>
            </label>
            <label class="select">
              FPS: 
              <select id="imgFps">
                <option>30</option>
                <option selected>15</option>
                <option>8</option>
                <option>4</option>
              </select>
            </label>
          </div>
        </div>
        <div class="media">
          <div class="video-wrapper">
            <video id="imgVideo" autoplay playsinline muted></video>
            <canvas id="imgCanvas" class="frame"></canvas>
            <div id="imgBadge" class="top1-badge">â€”</div>
            <div id="imgTooltip" class="tooltip" role="note" aria-live="polite">
              Consejo: Limpia y seca los residuos antes de separarlos.
            </div>
          </div>
          <div class="results">
            <h3>Resultados</h3>
            <div id="imgTop3" class="bars"></div>
          </div>
        </div>
      </section>

      <!-- ================== SONIDOS ================== -->
      <section id="panel-audio" class="panel" aria-labelledby="tab-audio">
        <div class="panel-head">
          <h2>Ritmos musicales</h2>
          <div class="controls">
            <button id="audio-start" class="btn">ğŸ™ï¸ Grabar</button>
            <button id="audio-stop" class="btn ghost">â¹ï¸ Detener</button>
            <label class="file">
              ğŸ§ Subir audio
              <input type="file" id="audio-upload" accept="audio/*" />
            </label>


            <label class="select">
              Fuente:
              <select id="audio-source">
                <option value="mic">MicrÃ³fono</option>
              </select>
            </label>
          </div>
        </div>

        <div class="media">
          <div class="audio-wrapper">
            <canvas id="audCanvas" width="640" height="240" aria-label="Onda / espectrograma"></canvas>

            <audio id="audio-player" controls></audio>

            <div class="meter">
              <label>Confianza</label>
              <!-- el mÃ³dulo de audio trabaja con 0â€“100 -->
              <progress id="audio-confidence" max="100" value="0"></progress>
            </div>
          </div>

          <div class="results">
            <h3>Resultados</h3>
            <div id="audio-results" class="bars">
              <!-- AquÃ­ se inyectan clase + confianza -->
            </div>
          </div>
        </div>
      </section>

      <!-- ================== POSTURAS ================== -->
      <section id="panel-poses" class="panel" aria-labelledby="tab-poses">
        <div class="panel-head">
          <h2>Gimnasio y calistenia</h2>
          <div class="controls">
            <button id="btn-pose-iniciar" class="btn">ğŸ¥ Iniciar cÃ¡mara</button>
            <button id="btn-pose-detener" class="btn ghost">â¹ï¸ Detener</button>
            <button id="btn-pose-subir" class="btn ghost">ğŸ“· Subir imagen</button>

            <label class="select">
              Ejercicio:
              <select id="poseExercise">
                <option value="sentadilla">Sentadilla</option>
                <option value="flexion">FlexiÃ³n (Push-up)</option>
                <option value="Bicep Curl">Bicep Curl</option>
                <option value="Press de Hombro">Press de Hombro</option>
              </select>
            </label>

            <span id="pose-status" class="status-text">
              No se pudo cargar el modelo de posturas
            </span>
          </div>
        </div>

        <div class="media">
          <div class="video-wrapper">
            <!-- El video puede quedar como decorativo; tmPose usa internamente su propio canvas -->
            <video id="poseVideo" autoplay playsinline muted></video>

            <!-- Canvas principal usado por tmPose -->
            <canvas id="pose-canvas" class="overlay"></canvas>

            <div class="rep-counter">
              Reps: <span id="poseReps">0</span>
            </div>

            <div id="poseCoach" class="coach-msg" aria-live="polite">
              Consejo: espalda recta.
            </div>
          </div>

          <div class="results">
            <h3>Resultados</h3>
            <div id="pose-results" class="bars">
              <!-- AquÃ­ se inyectan las probabilidades de cada ejercicio -->
            </div>
          </div>
        </div>

        <!-- Input oculto para subir imÃ¡genes -->
        <input id="pose-image-input" type="file" accept="image/*" class="hidden" />

        <p class="note">
          Nota educativa: Realiza estos movimientos en un espacio seguro. Esta demo no sustituye asesorÃ­a profesional.
        </p>
      </section>
    </main>
  </div>

    <footer class="app-footer">
    <small>Hecho para VisionCoders â€¢ Publicable en GitHub Pages â€¢ Esteban Rosas.</small>
  </footer>

  <!-- Tu script principal (mÃ³dulos ui, images, audio, poses) -->
  <script type="module" src="./assets/js/main.js"></script>
</body>
</html>

